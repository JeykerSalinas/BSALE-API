<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>Bsale</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-12 text-center">
          <img
            src="
                        https://dojiw2m9tvv09.cloudfront.net/4/8/img-logos-logo-bsale-naranjo.png?2047
                      "
            alt="Logo de Bsale"
          />
        </div>
      </div>
      <div class="row">
        <div class="input-group my-4">
          <label class="w-100">Obteniendo todos los productos:</label>
          <span class="input-group-text" id="basic-addon1"
            >https://api-bsale-jeyker.herokuapp.com/bsale/</span
          >
          <input
            type="text"
            class="form-control"
            placeholder="ingresar parámetro"
            aria-label="Username"
            aria-describedby="basic-addon1"

          />
          <button class="btn btn-primary" onclick="renderData()">
            Ver data
          </button>
        </div>
        <div class="col-12 my-4">
          <p>Params:</p>
          <ul class="list-group">
            <li class="list-group-item">
              <code>products</code> para obtener todos los productos
            </li>
            <li class="list-group-item">
              <code>category</code> para obtener todas las categorías
            </li>
            <li class="list-group-item">
              <code>category/:category</code> para filtrar productos por id de
              categoría
            </li>
            <li class="list-group-item">
              <code>products/name/:name</code> para filtrar productos por nombre
            </li>
          </ul>
        </div>
      </div>
      <div class="col-12 my-4">
        <textarea id="jsonPreview" class="col-12" cols="30" rows="10">
Acá se mostrará su búsqueda</textarea
        >
      </div>
    </div>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"
  ></script>
  <script>
    const renderData = async () => {
      const url = "https://api-bsale-jeyker.herokuapp.com/bsale/";
      const myParam = document.querySelector("input").value;
      try {
        const req = await fetch(url + myParam);
        const data = await req.json();
        myString = JSON.stringify(data);
        console.log(myString);
        document.getElementById("jsonPreview").innerHTML = myString;
      } catch (error) {
        document.getElementById("jsonPreview").innerHTML =
          "No se encotraron resultados, por favor repita su búsqueda";
      }
    };

    //   const async renderData = () => {
    //       let myString = "";
    //       const myParam = document.querySelector("input").value;
    //       console.log(myParam)
    //       const myURL = `https://api-bsale-jeyker.herokuapp.com/bsale/${myParam}`;

    //         try {
    //           const request = await fetch(URL);
    //           const data = await request.json();
    //           myString = JSON.stringify(data);
    //         } catch (error) {
    //           console.error(error);
    //         }
    //   console.log(myString);

    // };
  </script>
  <style>
    textarea {
      font-family: monospace;
    }
  </style>
</html>
